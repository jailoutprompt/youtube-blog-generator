<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚­ë§Œ â€” í•œì¼ì—°ì•  ê°€ì´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            line-height: 1.8;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        
        header p {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #2c3e50;
            color: white;
            overflow-y: auto;
            padding: 2rem 0;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .sidebar-toggle {
            position: fixed;
            left: 20px;
            top: 20px;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .sidebar h2 {
            padding: 0 1.5rem;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .sidebar ul {
            list-style: none;
        }
        
        .sidebar li {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: background 0.2s;
            border-left: 3px solid transparent;
        }
        
        .sidebar li:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #667eea;
        }
        
        .sidebar li.active {
            background: rgba(102, 126, 234, 0.3);
            border-left-color: #667eea;
        }
        
        .content {
            padding: 3rem 2rem;
        }
        
        .content h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #2c3e50;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
        }
        
        .content h2 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: #667eea;
        }
        
        .content h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 0.8rem;
            color: #555;
        }
        
        .content p {
            margin-bottom: 1rem;
            font-size: 1.05rem;
        }
        
        .punchline {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .script-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
        }
        
        .script-box h4 {
            color: #667eea;
            margin-bottom: 0.8rem;
        }
        
        .script-box.bad {
            border-left-color: #e74c3c;
        }
        
        .script-box.bad h4 {
            color: #e74c3c;
        }
        
        .script-box.good {
            border-left-color: #27ae60;
        }
        
        .script-box.good h4 {
            color: #27ae60;
        }
        
        .summary {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .loading {
            text-align: center;
            padding: 3rem;
            color: #666;
        }
        
        @media print {
            .sidebar, .sidebar-toggle {
                display: none;
            }
            
            .container {
                max-width: 100%;
                box-shadow: none;
            }
            
            header {
                page-break-after: always;
            }
            
            .content {
                padding: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
            }
            
            .content {
                padding: 2rem 1rem;
            }
            
            header h1 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <button class="sidebar-toggle" onclick="toggleSidebar()">â˜° ëª©ì°¨</button>
    
    <div class="sidebar" id="sidebar">
        <h2>ğŸ“– ëª©ì°¨</h2>
        <ul id="toc"></ul>
    </div>
    
    <div class="container">
        <header>
            <h1>í•œêµ­ ì‹ëŒ€ë¡œ í•˜ë‹¤ê°€ ë§í•˜ëŠ” í•œì¼ ì—°ì• </h1>
            <p>ì¼ë³¸ ì—¬ìì˜ ë§ˆìŒì„ ì—¬ëŠ” 27ê°€ì§€ ì‹¤ì „ ê°€ì´ë“œ</p>
            <div style="margin-top: 1rem;">
                <button onclick="window.print()" style="background: white; color: #667eea; border: 2px solid white; padding: 0.8rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                    ğŸ“„ PDFë¡œ ì €ì¥
                </button>
            </div>
        </header>
        
        <div class="content" id="content">
            <div class="loading">ë¡œë”© ì¤‘...</div>
        </div>
    </div>
    
    <script>
        const chapters = [
            { file: 'manuscript/01_prologue.md', title: 'í”„ë¡¤ë¡œê·¸' },
            { file: 'manuscript/02_chapter01.md', title: 'Chapter 1: ì•ˆë¶€ ë¬»ê¸°ê°€ ì™œ ì••ë°•ì´ ë˜ëŠ”ê°€?' },
            { file: 'manuscript/03_chapter02.md', title: 'Chapter 2: ë‹µì¥ í…œí¬ë¥¼ ì¡´ì¤‘í•˜ì§€ ì•Šìœ¼ë©´ ëë‚œë‹¤' },
            { file: 'manuscript/04_chapter03.md', title: 'Chapter 3: ì™€ë¦¬ì¹¸(ë”ì¹˜í˜ì´)ì„ ê±°ë¶€í•˜ë©´ í˜¸ê°ë„ê°€ ë–¨ì–´ì§„ë‹¤' },
            { file: 'manuscript/05_chapter04.md', title: 'Chapter 4: ì™€ë¦¬ì¹¸ ê³„ì‚°í•  ë•Œ ì„¼ìŠ¤ê°€ ë³´ì¸ë‹¤' },
            { file: 'manuscript/06_chapter05.md', title: 'Chapter 5: ê³µê³µì¥ì†Œì—ì„œ ìŠ¤í‚¨ì‹­ì€ ê¸ˆê¸°ë‹¤' },
            { file: 'manuscript/07_chapter06.md', title: 'Chapter 6: ìŠ¤í‚¨ì‹­ì€ ë‹¨ê³„ë³„ë¡œ ì ‘ê·¼í•´ì•¼ í•œë‹¤' },
            { file: 'manuscript/08_chapter07.md', title: 'Chapter 7: ê³ ì¿ í•˜ì¿ (ê³ ë°±) ì—†ì´ëŠ” ì—°ì• ê°€ ì•„ë‹ˆë‹¤' },
            { file: 'manuscript/09_chapter08.md', title: 'Chapter 8: ì¸ê³¼ ì—°ì• ì˜ ê²½ê³„ë¥¼ ëª…í™•íˆ í•´ì•¼ í•œë‹¤' },
            { file: 'manuscript/10_chapter09.md', title: 'Chapter 9: ì•„ì´ì¦ˆì¹˜(ë§ì¥êµ¬)ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”ê°€ ëŠê¸´ë‹¤' },
            { file: 'manuscript/11_chapter10.md', title: 'Chapter 10: ì§ì„¤ì ì¸ ë§íˆ¬ëŠ” ì¼ë³¸ ì—¬ìì—ê²Œ ë…ì´ë‹¤' },
            { file: 'manuscript/12_chapter11.md', title: 'Chapter 11: ì„ ë¬¼ì„ ë„ˆë¬´ ë¹„ì‹¸ê²Œ ì£¼ë©´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' },
            { file: 'manuscript/13_chapter12.md', title: 'Chapter 12: ì§ˆë¬¸ì„ ë„ˆë¬´ ë§ì´ í•˜ë©´ ì••ë°•ì´ë‹¤' },
            { file: 'manuscript/14_chapter13.md', title: 'Chapter 13: ì•½ì† ì‹œê°„ì„ ì§€í‚¤ì§€ ì•Šìœ¼ë©´ ì‹ ë¢°ê°€ ê¹¨ì§„ë‹¤' },
            { file: 'manuscript/15_chapter14.md', title: 'Chapter 14: ê³¼ë„í•œ ì¹­ì°¬ì€ ì˜¤íˆë ¤ ì—­íš¨ê³¼ë‹¤' },
            { file: 'manuscript/16_chapter15.md', title: 'Chapter 15: ê³¼ë„í•œ ê´€ì‹¬ í‘œí˜„ì€ ì§‘ì°©ìœ¼ë¡œ ë³´ì¸ë‹¤' },
            { file: 'manuscript/17_chapter16.md', title: 'Chapter 16: ê³¼ê±° ì—°ì•  ì´ì•¼ê¸°ë¥¼ í•˜ë©´ ë¶ˆí¸í•´í•œë‹¤' },
            { file: 'manuscript/18_chapter17.md', title: 'Chapter 17: ìˆ ìë¦¬ì—ì„œ ê³¼ë„í•œ í–‰ë™ì€ ê¸ˆê¸°ë‹¤' },
            { file: 'manuscript/19_chapter18.md', title: 'Chapter 18: ì¹œêµ¬ë“¤ì„ ë„ˆë¬´ ë¹¨ë¦¬ ì†Œê°œí•˜ë©´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' },
            { file: 'manuscript/20_chapter19.md', title: 'Chapter 19: SNSì—ì„œ ê³¼ë„í•œ í™œë™ì€ ì§‘ì°©ìœ¼ë¡œ ë³´ì¸ë‹¤' },
            { file: 'manuscript/21_chapter20.md', title: 'Chapter 20: ê³¼ë„í•œ ì§ˆíˆ¬ëŠ” ë…ì´ë‹¤' },
            { file: 'manuscript/22_chapter21.md', title: 'Chapter 21: ê³¼ë„í•œ ê³„íšì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' },
            { file: 'manuscript/23_chapter22.md', title: 'Chapter 22: ê³¼ë„í•œ ì• ì • í‘œí˜„ì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' },
            { file: 'manuscript/24_chapter23.md', title: 'Chapter 23: ê³¼ë„í•œ ê´€ì‹¬ì€ ë…ì´ë‹¤' },
            { file: 'manuscript/25_chapter24.md', title: 'Chapter 24: ê³¼ë„í•œ ë¹„êµëŠ” ê¸ˆê¸°ë‹¤' },
            { file: 'manuscript/26_chapter25.md', title: 'Chapter 25: ê³¼ë„í•œ ì œì•ˆì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' },
            { file: 'manuscript/27_chapter26.md', title: 'Chapter 26: ê³¼ë„í•œ ì„¤ëª…ì€ ì§€ë£¨í•˜ë‹¤' },
            { file: 'manuscript/28_chapter27.md', title: 'Chapter 27: ê³¼ë„í•œ ì•½ì†ì€ ì‹ ë¢°ë¥¼ ê¹¬ë‹¤' },
            { file: 'manuscript/29_chapter28.md', title: 'Chapter 28: ë¬¸í™”ì  ì°¨ì´ë¥¼ ì¸ì •í•˜ì§€ ì•Šìœ¼ë©´ ëë‚œë‹¤' },
            { file: 'manuscript/30_epilogue.md', title: 'ì—í•„ë¡œê·¸' }
        ];
        
        let currentChapter = 0;
        
        // ëª©ì°¨ ìƒì„±
        function buildTOC() {
            const toc = document.getElementById('toc');
            chapters.forEach((chapter, index) => {
                const li = document.createElement('li');
                li.textContent = chapter.title;
                li.onclick = () => loadChapter(index);
                if (index === 0) li.classList.add('active');
                toc.appendChild(li);
            });
        }
        
        // ì±•í„° ë¡œë“œ
        async function loadChapter(index) {
            currentChapter = index;
            const content = document.getElementById('content');
            content.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';
            
            try {
                const response = await fetch(chapters[index].file);
                const text = await response.text();
                
                // ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜
                let html = marked.parse(text);
                
                // íŠ¹ìˆ˜ í¬ë§·íŒ… ì²˜ë¦¬
                html = html.replace(/\[Punchline\]:\s*"([^"]+)"/g, '<div class="punchline">$1</div>');
                html = html.replace(/\[The Problem\]:/g, '<h2>âŒ The Problem</h2>');
                html = html.replace(/\[The Solution\]:/g, '<h2>âœ… The Solution</h2>');
                html = html.replace(/\[Script\]:/g, '<h2>ğŸ’¬ Script</h2>');
                html = html.replace(/\[Summary\]:/g, '<div class="summary">ğŸ“Œ Summary: ');
                html = html.replace(/(<div class="summary">[^<]+)/g, '$1</div>');
                
                // Bad/Good ìŠ¤í¬ë¦½íŠ¸ ë°•ìŠ¤ ì²˜ë¦¬
                html = html.replace(/\*\*Bad[^:]*:\*\*/g, '<div class="script-box bad"><h4>âŒ Bad</h4>');
                html = html.replace(/\*\*Good[^:]*:\*\*/g, '<div class="script-box good"><h4>âœ… Good</h4>');
                
                content.innerHTML = html;
                
                // ëª©ì°¨ í™œì„±í™” ì—…ë°ì´íŠ¸
                document.querySelectorAll('#toc li').forEach((li, i) => {
                    li.classList.toggle('active', i === index);
                });
                
                // ì‚¬ì´ë“œë°” ë‹«ê¸° (ëª¨ë°”ì¼)
                if (window.innerWidth <= 768) {
                    document.getElementById('sidebar').classList.remove('open');
                }
                
                // ìŠ¤í¬ë¡¤ ë§¨ ìœ„ë¡œ
                window.scrollTo(0, 0);
            } catch (error) {
                content.innerHTML = `<div class="loading">ì—ëŸ¬: ${error.message}<br>ë¡œì»¬ ì„œë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë˜ ë°°í¬ ë°©ë²•ì„ ì°¸ê³ í•˜ì„¸ìš”.</div>`;
            }
        }
        
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }
        
        // ì´ˆê¸°í™”
        buildTOC();
        loadChapter(0);
        
        // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && currentChapter > 0) {
                loadChapter(currentChapter - 1);
            } else if (e.key === 'ArrowRight' && currentChapter < chapters.length - 1) {
                loadChapter(currentChapter + 1);
            }
        });
    </script>
</body>
</html>

